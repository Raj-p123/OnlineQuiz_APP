<div class="manage-quiz-container">
  <h2>üìã Manage Quizzes</h2>

  <!-- QUIZ TABLE -->
  <table class="quiz-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Quiz Title</th>
        <th>Category</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let quiz of quizzes; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ quiz.title }}</td>
        <td>{{ quiz.category }}</td>
        <td>{{ quiz.description }}</td>
        <td>
          <button class="btn btn-view" (click)="viewQuiz(quiz)">
            <i class="fas fa-eye"></i> View
          </button>
          <button class="btn btn-delete" (click)="deleteQuiz(quiz.id)">
            <i class="fas fa-trash"></i> Delete
          </button>
        </td>
      </tr>

      <tr *ngIf="quizzes.length === 0">
        <td colspan="5" class="no-data">‚ö†Ô∏è No quizzes found.</td>
      </tr>
    </tbody>
  </table>

  <!-- ‚úÖ QUESTIONS SECTION -->
  <div *ngIf="selectedQuiz" class="questions-section">
    <h3>üßæ Questions for: {{ selectedQuiz.title }}</h3>
    <button class="btn btn-add" (click)="toggleAddQuestion()">‚ûï Add Question</button>

    <table class="quiz-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Question</th>
          <th>Options</th>
          <th>Correct Answer</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let q of questions; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ q.text }}</td>
          <td>{{ q.option1 }}, {{ q.option2 }}, {{ q.option3 }}, {{ q.option4 }}</td>
          <td>{{ q.correctAnswer }}</td>
          <td>
            <button class="btn btn-delete" (click)="deleteQuestion(q.id)">
              üóëÔ∏è Delete
            </button>
          </td>
        </tr>

        <tr *ngIf="questions.length === 0">
          <td colspan="5" class="no-data">‚ö†Ô∏è No questions found for this quiz.</td>
        </tr>
      </tbody>
    </table>

    <!-- ‚úÖ ADD QUESTION FORM -->
    <div *ngIf="showAddForm" class="add-form">
      <h4>‚ûï Add New Question</h4>
      <form (ngSubmit)="saveNewQuestion()">
        <input type="text" [(ngModel)]="newQuestion.text" name="text" placeholder="Enter question" required />

        <input type="text" [(ngModel)]="newQuestion.option1" name="option1" placeholder="Option 1" required />
        <input type="text" [(ngModel)]="newQuestion.option2" name="option2" placeholder="Option 2" required />
        <input type="text" [(ngModel)]="newQuestion.option3" name="option3" placeholder="Option 3" required />
        <input type="text" [(ngModel)]="newQuestion.option4" name="option4" placeholder="Option 4" required />

        <input type="text" [(ngModel)]="newQuestion.correctAnswer" name="correctAnswer" placeholder="Correct Answer" required />

        <div class="form-actions">
          <button type="submit" class="btn btn-save">üíæ Save</button>
          <button type="button" class="btn btn-cancel" (click)="toggleAddQuestion()">‚ùå Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
