<div class="manage-quiz-container">
  <h2>ğŸ“‹ Manage Quizzes</h2>

  <!-- QUIZ TABLE -->
  <table class="quiz-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Quiz Title</th>
        <th>Category</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let quiz of quizzes; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ quiz.title }}</td>
        <td>{{ quiz.category }}</td>
        <td>{{ quiz.description }}</td>
        <td>
          <button class="view-btn" (click)="viewQuiz(quiz)">ğŸ‘ï¸ View</button>
          <button class="edit-btn" (click)="editQuiz(quiz)">âœï¸ Edit</button>
          <button class="delete-btn" (click)="deleteQuiz(quiz.id)">ğŸ—‘ï¸ Delete</button>
        </td>
      </tr>

      <tr *ngIf="quizzes.length === 0">
        <td colspan="5" class="no-data">âš ï¸ No quizzes found.</td>
      </tr>
    </tbody>
  </table>

  <!-- VIEW QUESTIONS -->
  <div *ngIf="selectedQuiz" class="questions-container">
    <h3>ğŸ§¾ Questions for: {{ selectedQuiz.title }}</h3>
    <button class="add-btn" (click)="startAddQuestion()">â• Add Question</button>

    <table class="quiz-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Question</th>
          <th>Options</th>
          <th>Correct</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let q of questions; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ q.text }}</td>
          <td>{{ q.option1 }}, {{ q.option2 }}, {{ q.option3 }}, {{ q.option4 }}</td>
          <td>{{ q.correctAnswer }}</td>
          <td>
            <button class="edit-btn" (click)="editQuestion(q)">âœï¸ Edit</button>
            <button class="delete-btn" (click)="deleteQuestion(q.id)">ğŸ—‘ï¸ Delete</button>
          </td>
        </tr>

        <tr *ngIf="questions.length === 0">
          <td colspan="5" class="no-data">âš ï¸ No questions found.</td>
        </tr>
      </tbody>
    </table>

    <!-- ADD QUESTION FORM -->
    <div *ngIf="addingQuestion" class="edit-container">
      <h4>â• Add Question</h4>
      <form (ngSubmit)="saveNewQuestion()">
        <input [(ngModel)]="newQuestion.text" name="text" placeholder="Question text" required />
        <input [(ngModel)]="newQuestion.option1" name="option1" placeholder="Option 1" required />
        <input [(ngModel)]="newQuestion.option2" name="option2" placeholder="Option 2" required />
        <input [(ngModel)]="newQuestion.option3" name="option3" placeholder="Option 3" required />
        <input [(ngModel)]="newQuestion.option4" name="option4" placeholder="Option 4" required />
        <input [(ngModel)]="newQuestion.correctAnswer" name="correctAnswer" placeholder="Correct Answer" required />

        <div class="buttons">
          <button type="submit" class="save-btn">ğŸ’¾ Save</button>
          <button type="button" class="cancel-btn" (click)="addingQuestion=false">âŒ Cancel</button>
        </div>
      </form>
    </div>

    <!-- EDIT QUESTION FORM -->
    <div *ngIf="editingQuestion" class="edit-container">
      <h4>âœï¸ Edit Question</h4>
      <form (ngSubmit)="updateQuestion()">
        <input [(ngModel)]="editingQuestion.text" name="text" placeholder="Question text" required />
        <input [(ngModel)]="editingQuestion.option1" name="option1" placeholder="Option 1" required />
        <input [(ngModel)]="editingQuestion.option2" name="option2" placeholder="Option 2" required />
        <input [(ngModel)]="editingQuestion.option3" name="option3" placeholder="Option 3" required />
        <input [(ngModel)]="editingQuestion.option4" name="option4" placeholder="Option 4" required />
        <input [(ngModel)]="editingQuestion.correctAnswer" name="correctAnswer" placeholder="Correct Answer" required />

        <div class="buttons">
          <button type="submit" class="save-btn">ğŸ’¾ Update</button>
          <button type="button" class="cancel-btn" (click)="cancelQuestionEdit()">âŒ Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
